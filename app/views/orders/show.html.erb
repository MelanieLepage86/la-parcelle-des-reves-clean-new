<div class="p-5">
  <h1>Récapitulatif de commande</h1>

  <% if @order.present? && @order.order_items.any? %>
    <p class="fs-4 mb-4" style="color: #7A94B0;">Merci pour votre achat !</p>

    <div class="row justify-content-start g-4">
      <% @order.order_items.each do |item| %>
        <% artwork = item.artwork %>

        <div class="col-lg-3 col-md-4 col-sm-6 col-12">
          <div class="card text-center shadow-sm"
               style="border: none; border-radius: 10px; overflow: hidden; transition: transform 0.2s ease-in-out; background-color: #fff;">

            <% if artwork.images.attached? %>
              <% primary_image = artwork.images.first %>
              <div style="width: 100%; height: 300px; overflow: hidden; background-color: #f8f8f8;
                          display: flex; align-items: center; justify-content: center;">
                <%= image_tag url_for(primary_image),
                              style: "width: 100%; height: 100%; object-fit: cover;",
                              alt: artwork.title %>
              </div>
            <% else %>
              <div style="width: 100%; height: 300px; overflow: hidden; background-color: #f8f8f8;
                          display: flex; align-items: center; justify-content: center;">
                <%= image_tag "placeholder.jpg",
                              style: "width: 100%; height: 100%; object-fit: cover;",
                              alt: 'Aucune image disponible' %>
              </div>
            <% end %>

            <div class="card-body text-center p-2">
              <h5 class="card-title mb-1" style="font-size: 1rem; font-weight: 600; color: #1F2F40;">
                <%= artwork.title %>
              </h5>
              <p class="card-text fw-bold mb-2" style="font-size: 0.9rem; color: #7A94B0;">
                <%= number_to_currency(item.unit_price, unit: "€", separator: ",", delimiter: " ") %>
              </p>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <p class="fs-5 mt-4">
      <strong>Montant total :</strong>
      <%= number_to_currency(@order.total_amount, unit: "€") %>
    </p>
  <% else %>
    <p>Commande introuvable ou sans items.</p>
  <% end %>
</div>

